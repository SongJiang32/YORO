# Camera calibration

相机固定在机械臂末端，计算相机到机械臂末端的旋转矩阵与平移矩阵

## 准备工作

准备方格标定板，采集15-30组左右数据

打开相机拍照、保存，并记录当前机械臂末端的位姿（x y z Rx Ry Rz）两者要一一对应，单位 m 和 rad

将照片和末端的pose分别放到images文件夹下与poses.txt里面

照片命名从0.jpg-1.jpg到xx.jpg 机械臂角度变化大一点效果好点

标定板要占图像的三分之一到三分之二较好，图像各个角落都采集到较好，让图片清晰可见

程序修改：main函数里面根据自己的路径和标定板更改路径和参数


## 使用

执行py程序，按esc显示下一张照片角点，看到角点识别不好的图片需要删除，提高精度，同时也要删掉对应的pose，不能弄错了

标定板在相机里的角点检测时，起始点和终点最好在每张照片中位置保持一致，防止旋转矩阵误差。有不同的最好去掉。


> [!NOTE]
> 在windows下路径名称分隔是\\,例如D:\\images r'C:\Users\Admin\Desktop\images'，在ubuntu下是./images
>
> 也可以使用绝对路径，如果是读取错误，那就是路径有问题，改一下涉及文件路径的函数
>
> 69行 save_matrices_to_csv，91行，125行，179行，180行
> 76行 save_matrices_to_csv，94行，129行，182行，183行
> 
> 需要确定自己机械臂的欧拉角旋转顺序，是xyz还是zyx，通常是这两个，在27行可能需要修改，实在不知道就两个都试一下，看哪个结果合理
>
> 结果选择：本算法采用了TSAI、PARK、HORAUD三种计算方式，分别打印出来，默认选择是TSAI，用户可根据实际情况选择结果。可按照平移向量来初步判断合理性，其他只能靠实验验证。

![图片描述](/home/jason32/123.jpg)

